package org.exploit.keeper.service.signature.gg20.initiator

import org.exploit.keeper.api.client.TKeeperClient
import org.exploit.keeper.extension.perform
import org.exploit.keeper.service.signature.gg20.GG20OfflinePhaseHandler
import org.exploit.tss.curve.ec.WeierstrassPointOps

class GG20OfflinePhaseCollector<P : WeierstrassPointOps<P>>(private val handler: GG20OfflinePhaseHandler<P>) {
    fun collect(peers: List<TKeeperClient>, sessionId: String) {
        handler.broadcast(sessionId)

        peers.perform {
            it.gg20.broadcastOfflinePhase(sessionId)
        }
    }
}