package org.exploit.keeper.adapter

import io.quarkus.runtime.Startup
import jakarta.enterprise.inject.Produces
import jakarta.inject.Singleton
import org.exploit.keeper.config.KeeperConfig
import org.exploit.keeper.db.LMKDB

@Startup
@Singleton
class LMKDBAdapter(private val config: KeeperConfig) {

    @Produces
    @Singleton
    @Startup
    fun lmkdb(): LMKDB {
        val password = System.console().readPassword("Enter master-password: ")
        return LMKDB(config.databasePath(), password)
    }
}