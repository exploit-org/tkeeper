package org.exploit.keeper.extension

import com.fasterxml.jackson.core.StreamReadConstraints
import com.fasterxml.jackson.databind.ObjectMapper
import com.fasterxml.jackson.module.kotlin.jacksonObjectMapper
import com.fasterxml.jackson.module.kotlin.registerKotlinModule

fun <T, R> T.then(block: (T) -> R): R {
    return block(this)
}

fun jackson(): ObjectMapper = jacksonObjectMapper().registerKotlinModule().apply {
    factory.setStreamReadConstraints(StreamReadConstraints.builder()
        .maxNumberLength(2000)
        .build()
    )
}