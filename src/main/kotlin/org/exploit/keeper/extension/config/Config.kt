package org.exploit.keeper.extension.config

import com.typesafe.config.Config
import java.time.Duration

fun Config.has(path: String) = this.hasPath(path)

fun Config.str(path: String, def: String? = null): String =
    if (has(path)) getString(path) else def ?: error("Missing required: $path")

fun Config.strOrNull(path: String): String? =
    if (has(path)) getString(path) else null

fun Config.bool(path: String, def: Boolean) =
    if (has(path)) getBoolean(path) else def

fun Config.int(path: String, def: Int) =
    if (has(path)) getInt(path) else def

fun Config.long(path: String, def: Long) =
    if (has(path)) getLong(path) else def

fun Config.bytes(path: String, def: Long): Long =
    if (has(path)) getBytes(path) else def

fun Config.dur(path: String, def: Duration) =
    if (has(path)) getDuration(path) else def

fun Config.strList(path: String): List<String> =
    if (has(path)) getStringList(path) else emptyList()