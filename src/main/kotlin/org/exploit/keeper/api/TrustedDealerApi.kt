package org.exploit.keeper.api

import org.eclipse.jetty.http.HttpMethod
import org.exploit.jettyx.annotation.Body
import org.exploit.jettyx.annotation.HttpRequest
import org.exploit.jettyx.annotation.Query
import org.exploit.jettyx.model.HttpResponse
import org.exploit.keeper.model.keygen.import.ImportShare
import java.util.concurrent.CompletableFuture

interface TrustedDealerApi {
    @HttpRequest(path = "/v1/dealer/import", method = HttpMethod.POST)
    fun store(@Body body: ImportShare): CompletableFuture<HttpResponse<Void>>

    @HttpRequest(path = "/v1/dealer/revert", method = HttpMethod.POST)
    fun revert(@Query("keyId") keyId: String): CompletableFuture<HttpResponse<Void>>

    @HttpRequest(path = "/v1/dealer/sync", method = HttpMethod.POST)
    fun sync(@Query("keyId") keyId: String): CompletableFuture<HttpResponse<Void>>
}