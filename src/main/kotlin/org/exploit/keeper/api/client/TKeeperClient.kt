package org.exploit.keeper.api.client

import org.exploit.crypto.key.ed25519.Ed25519PublicKey
import org.exploit.jettyx.Jettyx
import org.exploit.keeper.api.*
import org.exploit.keeper.service.auth.jettyx.KeeperJettyxAuthenticator
import java.util.concurrent.atomic.AtomicReference

class TKeeperClient(val peerId: Int, auth: KeeperJettyxAuthenticator, val url: String, internalClient: Jettyx) {
    val publicKey = AtomicReference<Ed25519PublicKey>()

    val dealer: TrustedDealerApi by lazy {
        internalClient.newApiClient(url, auth).create(TrustedDealerApi::class.java)
    }

    val destroy: DestroyApi by lazy {
        internalClient.newApiClient(url, auth).create(DestroyApi::class.java)
    }

    val frost: FrostApi by lazy {
        internalClient.newApiClient(url, auth).create(FrostApi::class.java)
    }

    val gg20: GG20Api by lazy {
        internalClient.newApiClient(url, auth).create(GG20Api::class.java)
    }

    val health: HealthApi by lazy {
        internalClient.newApiClient(url, auth).create(HealthApi::class.java)
    }

    val keyGen: KeyGenApi by lazy {
        internalClient.newApiClient(url, auth).create(KeyGenApi::class.java)
    }

    val public: PublicKeyApi by lazy {
        internalClient.newApiClient(url, auth).create(PublicKeyApi::class.java)
    }

    val ecies: ECIESApi by lazy {
        internalClient.newApiClient(url, auth).create(ECIESApi::class.java)
    }
}