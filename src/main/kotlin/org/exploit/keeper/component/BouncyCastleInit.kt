package org.exploit.keeper.component

import com.sun.jna.NativeLibrary
import io.quarkus.runtime.Startup
import jakarta.annotation.PostConstruct
import jakarta.inject.Singleton
import org.bouncycastle.jce.provider.BouncyCastleProvider
import java.security.Security

@Startup
@Singleton
class BouncyCastleInit {
    @PostConstruct
    fun register() {
        NativeLibrary.addSearchPath("sodium", "/opt/homebrew/Cellar/libsodium/1.0.20/lib")
        NativeLibrary.addSearchPath("gmp", "/opt/homebrew/Cellar/gmp/6.3.0/lib")

        Security.addProvider(BouncyCastleProvider())
    }
}