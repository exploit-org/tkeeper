package org.exploit.keeper.config

import io.quarkus.runtime.annotations.StaticInitSafe
import io.smallrye.config.ConfigMapping
import java.time.Duration
import java.util.*

@StaticInitSafe
@ConfigMapping(prefix = "keeper")
interface KeeperConfig {
    fun parallelism(): Int

    fun databasePath(): String

    fun seal(): SealConfig

    fun auth(): AuthConfig

    fun session(): SessionConfig

    fun peers(): List<PeerConfig>

    fun ssl(): SslConfig

    interface SessionConfig {
        fun gg20(): SessionDetail

        fun frost(): SessionDetail

        interface SessionDetail {
            fun expire(): Duration
        }
    }

    interface PeerConfig {
        fun id(): Int
        fun publicUrl(): String
    }

    interface SslConfig {
        fun enabled(): Boolean
        fun trustStorePath(): Optional<String>
        fun trustStorePassword(): Optional<String>
    }
}